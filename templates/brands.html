{% extends "base.html" %}
{% block title %}{{ category.name }} - Brands{% endblock %}
{% block content %}
<div class="page-header">
  <div class="breadcrumb">
    <a href="{{ url_for('dashboard') }}">Dashboard</a>
    <span class="separator">‚Ä∫</span>
    <span>{{ category.name }}</span>
  </div>
  <h2>{{ category.name }} Brands</h2>
  {% if category.description %}
    <p>{{ category.description }}</p>
  {% endif %}
</div>

<div class="form-section">
  <section class="card">
    <h3>Add New Brand</h3>
    <form method="post" action="{{ url_for('add_brand', category_id=category.id) }}" class="brand-form" enctype="multipart/form-data">
      <div class="form-group">
        <label>
          Brand Name
          <input name="name" placeholder="e.g. Gucci, Prada, Nike" required>
        </label>
      </div>
      <div class="form-group">
        <label>
          Description
          <textarea name="description" placeholder="Brief description of this brand"></textarea>
        </label>
      </div>
      <div class="form-group">
        <label>
          Website URL (Optional)
          <input name="website_url" placeholder="brand-website.com">
        </label>
      </div>
      <div class="form-group">
        <label>
          Brand Icon
          <input type="file" name="icon_file" accept="image/*" class="file-input">
          <div class="file-input-helper">
            <span class="file-btn">Choose Icon</span>
            <span class="file-text">Upload custom icon (optional)</span>
          </div>
        </label>
      </div>
      <div class="form-actions">
        <button class="btn" type="submit">Add Brand</button>
        <a href="{{ url_for('categories') }}" class="btn btn-secondary">Back to Categories</a>
      </div>
    </form>
  </section>
</div>

<div class="form-section">
  <section class="card">
    <h3>Brands in {{ category.name }}</h3>
    {% if brands %}
      <div class="brand-grid">
        {% for brand in brands %}
          <div class="brand-card" data-brand-id="{{ brand.id }}">
            <div class="brand-content">
              <div class="brand-header">
                <h4>{{ brand.name }}</h4>
                <span class="item-count">{{ brand.link_count or 0 }} links</span>
              </div>
              {% if brand.description %}
                <p class="brand-description">{{ brand.description }}</p>
              {% endif %}
              {% if brand.website_url %}
                <a href="{{ brand.website_url }}" class="brand-website" target="_blank">
                  Visit Website
                </a>
              {% endif %}
              <div class="brand-actions">
                <a href="{{ url_for('brand_links', brand_id=brand.id) }}" class="btn btn-primary">
                  Manage Links
                </a>
                <a href="{{ url_for('edit_brand', brand_id=brand.id) }}" class="edit-btn" title="Edit Brand">‚úèÔ∏è</a>
                <form method="post" action="{{ url_for('delete_brand', brand_id=brand.id) }}" class="delete-form" onsubmit="return confirm('Are you sure you want to delete this brand? This will also delete all associated links.')">
                  <button type="submit" class="delete-btn" title="Delete Brand">üóëÔ∏è</button>
                </form>
              </div>
            </div>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <div class="empty-state">
        <h4>No brands yet</h4>
        <p>Add your first brand to start organizing your links.</p>
      </div>
    {% endif %}
  </section>
</div>
{% endblock %}