{% extends "base.html" %}
{% block title %}Edit {{ subcategory.name }}{% endblock %}
{% block content %}
<div class="page-header animate-fade-in">
  <div class="breadcrumb">
    <a href="{{ url_for('dashboard') }}">Dashboard</a>
    <span class="separator">›</span>
    <a href="{{ url_for('category_subcategories', category_id=subcategory.categories.id) }}">{{ subcategory.categories.name }}</a>
    <span class="separator">›</span>
    <span>Edit {{ subcategory.name }}</span>
  </div>
  <h2>Edit <span class="gradient-text">{{ subcategory.name }}</span></h2>
</div>

<section class="card card-premium animate-slide-in">
  <h3>Update Subcategory</h3>
  <form method="post" action="{{ url_for('edit_subcategory', subcategory_id=subcategory.id) }}" enctype="multipart/form-data">
    <div class="form-row">
      <div class="form-group">
        <label>
          Subcategory Name
          <input name="name" value="{{ subcategory.name }}" required>
        </label>
      </div>
      <div class="form-group">
        <label>
          Color
          <input name="color" type="color" value="{{ subcategory.color or '#6366f1' }}">
        </label>
      </div>
    </div>
    <div class="form-group">
      <label>
        Description
        <textarea name="description" placeholder="Brief description of this subcategory">{{ subcategory.description or '' }}</textarea>
      </label>
    </div>
    
    {% if subcategory.icon_url %}
    <div class="current-icon-section">
      <label>Current Icon</label>
      <div class="current-icon">
        <img src="{{ subcategory.icon_url }}" alt="Current icon" class="icon-preview">
      </div>
    </div>
    {% endif %}
    
    <div class="form-group">
      <label>
        Update Icon
        <input type="file" name="icon_file" accept="image/*" class="file-input">
        <div class="file-input-helper">
          <span class="file-btn">Choose New Icon</span>
          <span class="file-text">Upload new icon (optional)</span>
        </div>
      </label>
    </div>
    
    <div class="form-actions">
      <button class="btn btn-primary" type="submit">Update Subcategory</button>
      <a href="{{ url_for('category_subcategories', category_id=subcategory.categories.id) }}" class="btn btn-outline">Cancel</a>
    </div>
  </form>
</section>

<style>
.current-icon-section {
  margin-bottom: var(--space-6);
}

.current-icon {
  display: flex;
  align-items: center;
  gap: var(--space-4);
  margin-top: var(--space-2);
}

.icon-preview {
  width: 64px;
  height: 64px;
  border-radius: var(--radius-full);
  object-fit: cover;
  box-shadow: var(--shadow-md);
}

.form-row {
  display: grid;
  grid-template-columns: 1fr auto;
  gap: var(--space-4);
  align-items: end;
}

@media (max-width: 768px) {
  .form-row {
    grid-template-columns: 1fr;
  }
}
</style>
{% endblock %}