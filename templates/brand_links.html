{% extends "base.html" %}
{% block title %}{{ brand.name }} - Links{% endblock %}
{% block content %}
<div class="page-header">
  <div class="breadcrumb">
    <a href="{{ url_for('dashboard') }}">Dashboard</a>
    <span class="separator">›</span>
    <a href="{{ url_for('category_brands', category_id=brand.categories.id) }}">{{ brand.categories.name }}</a>
    <span class="separator">›</span>
    <span>{{ brand.name }}</span>
  </div>
  <h2>{{ brand.name }} Links</h2>
  {% if brand.description %}
    <p>{{ brand.description }}</p>
  {% endif %}
</div>

<div class="form-section">
  <section class="card">
    <h3>Add New Link</h3>
    <form method="post" action="{{ url_for('add_link', brand_id=brand.id) }}" class="link-form">
      <div class="form-group">
        <label>
          Link Title
          <input name="title" placeholder="e.g. Shop Now, View Collection" required>
        </label>
      </div>
      <div class="form-group">
        <label>
          URL
          <input name="url" placeholder="example.com or https://example.com" required>
        </label>
      </div>
      <div class="form-group">
        <label>
          Description (Optional)
          <textarea name="description" placeholder="Brief description of this link"></textarea>
        </label>
      </div>
      <div class="form-actions">
        <button class="btn" type="submit">Add Link</button>
        <a href="{{ url_for('category_brands', category_id=brand.categories.id) }}" class="btn btn-secondary">Back to Brands</a>
      </div>
    </form>
  </section>
</div>

<div class="form-section">
  <section class="card">
    <h3>Links for {{ brand.name }}</h3>
    {% if links %}
      <div class="link-list">
        {% for link in links %}
          <div class="link-item">
            <div class="link-content">
              <div class="link-header">
                <h4>{{ link.title }}</h4>
                <span class="click-count">{{ link.click_count }} clicks</span>
              </div>
              <p class="link-url">{{ link.url }}</p>
              {% if link.description %}
                <p class="link-description">{{ link.description }}</p>
              {% endif %}
            </div>
            <div class="link-actions">
              <a href="{{ url_for('redirect_link', link_id=link.id) }}" class="btn btn-sm" target="_blank">
                Visit
              </a>
              <a href="{{ url_for('edit_link', link_id=link.id) }}" class="btn btn-sm btn-secondary">
                Edit
              </a>
              <form method="post" action="{{ url_for('delete_link', link_id=link.id) }}" style="display: inline;">
                <button class="btn btn-sm btn-danger" type="submit" onclick="return confirm('Delete this link?')">
                  Delete
                </button>
              </form>
            </div>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <div class="empty-state">
        <h4>No links yet</h4>
        <p>Add your first link for this brand above.</p>
      </div>
    {% endif %}
  </section>
</div>
{% endblock %}